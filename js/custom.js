var percentFlag=!1;function essayScroll(){const e=(document.documentElement.scrollTop||window.pageYOffset)%document.documentElement.clientHeight;result<=99||(result=99),!percentFlag&&e+100>=document.documentElement.clientHeight&&document.querySelector("#waterfall")?setTimeout((()=>{waterfall("#waterfall")}),500):setTimeout((()=>{document.querySelector("#waterfall")&&waterfall("#waterfall")}),500);const t=window.scrollY+document.documentElement.clientHeight;let n=document.getElementById("post-comment")||document.getElementById("footer");(n.offsetTop+n.offsetHeight/2<t||90<result)&&(percentFlag=!0)}function replaceAll(e,t,n){return e.split(t).join(n)}var anzhiyu={diffDate:function(e,t=!1){const n=new Date,a=new Date(e),o=n.getTime()-a.getTime(),l=36e5,r=24*l;let c;if(t){const e=o/r,t=o/l,n=o/6e4;c=o/2592e6>=1?a.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.day:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.hour:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else c=parseInt(o/r);return c},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=anzhiyu.diffDate(n,!0),t.style.display="inline"}))},reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},commentText:function(e){"undefined"!=e&&"null"!=e||(e="好棒！");var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");if(t){n.initEvent("input",!0,!0);var a=replaceAll(e,"\n","\n> ");t.value="> "+a+"\n\n",t.dispatchEvent(n);var o=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,o-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}}};function hideTodayCard(){document.getElementById("todayCard")&&document.getElementById("todayCard").classList.add("hide")}anzhiyu.changeTimeInEssay(),anzhiyu.reflashEssayWaterFall(),$(".topGroup").hover((function(){}),(function(){hoverOnCommentBarrage=!1,document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1})),setInterval((()=>{let e=Math.round(new Date("2022/12/14 00:00:00").getTime()/1e3),t=Math.round((new Date).getTime()/1e3)-e,n=new Array(0,0,0,0,0);var a=function(e){return e>9?e:"0"+e};t>=86400&&(n[1]=parseInt(t/86400),t%=86400),t>=3600&&(n[2]=a(parseInt(t/3600)),t%=3600),t>=60&&(n[3]=a(parseInt(t/60)),t%=60),t>=0&&(n[4]=a(t));let o="";o+=n[1]+" 天 "+n[2]+" 时 "+n[3]+" 分 "+n[4]+" 秒",document.getElementById("runtime").innerHTML=o}),1e3);