var percentFlag=!1;function essayScroll(){const e=(document.documentElement.scrollTop||window.pageYOffset)%document.documentElement.clientHeight;result<=99||(result=99),!percentFlag&&e+100>=document.documentElement.clientHeight&&document.querySelector("#waterfall")?setTimeout((()=>{waterfall("#waterfall")}),500):setTimeout((()=>{document.querySelector("#waterfall")&&waterfall("#waterfall")}),500);const t=window.scrollY+document.documentElement.clientHeight;let n=document.getElementById("post-comment")||document.getElementById("footer");(n.offsetTop+n.offsetHeight/2<t||90<result)&&(percentFlag=!0)}function replaceAll(e,t,n){return e.split(t).join(n)}var lmx0={diffDate:function(e,t=!1){const n=new Date,a=new Date(e),o=n.getTime()-a.getTime(),l=36e5,r=24*l;let c;if(t){const e=o/r,t=o/l,n=o/6e4;c=o/2592e6>=1?a.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.day:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.hour:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else c=parseInt(o/r);return c},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=lmx0.diffDate(n,!0),t.style.display="inline"}))},reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},commentText:function(e){var t=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,t-80),"undefined"!=e&&"null"!=e||(e="好棒！"),function t(){setTimeout((()=>{var n=document.getElementsByClassName("el-textarea__inner")[0];n||t();let a=document.createEvent("HTMLEvents");a.initEvent("input",!0,!0);let o=replaceAll(e,"\n","\n> ");n.value="> "+o+"\n\n",n.dispatchEvent(a),n.focus(),n.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}),100)}()},initIndexEssay:function(){setTimeout((()=>{let e=new Swiper(".essay_bar_swiper_container",{passiveListeners:!0,direction:"vertical",loop:!0,autoplay:{disableOnInteraction:!0,delay:3e3},mousewheel:!0}),t=document.getElementById("bbtalk");null!==t&&(t.onmouseenter=function(){e.autoplay.stop()},t.onmouseleave=function(){e.autoplay.start()})}),100)}};function categoriesBarActive(){var e=window.location.pathname;if(e=decodeURIComponent(e),console.log(e),"/"==e)document.querySelector("#category-bar")&&document.getElementById("首页").classList.add("select");else{var t=/\/categories\/.*?\//.test(e);if(console.log(t),t){var n=e.split("/");console.log(n[2]);var a=n[2];document.querySelector("#category-bar")&&document.getElementById(a).classList.add("select")}}}function topCategoriesBarScroll(){if(document.getElementById("category-bar-items")){let e=document.getElementById("category-bar-items");e.addEventListener("mousewheel",(function(t){let n=-t.wheelDelta/2;e.scrollLeft+=n,t.preventDefault()}),!1)}}function switchDarkMode(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"===("undefined"==typeof FB?"undefined":_typeof(FB))&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((function(){return window.disqusReset()}),200)}function hideTodayCard(){document.getElementById("todayCard")&&document.getElementById("todayCard").classList.add("hide")}lmx0.changeTimeInEssay(),lmx0.reflashEssayWaterFall(),lmx0.initIndexEssay(),lmx0.changeTimeInEssay(),lmx0.reflashEssayWaterFall(),categoriesBarActive(),topCategoriesBarScroll(),setInterval((()=>{let e=Math.round(new Date("2022/12/14 00:00:00").getTime()/1e3),t=Math.round((new Date).getTime()/1e3)-e,n=new Array(0,0,0,0,0);var a=function(e){return e>9?e:"0"+e};t>=86400&&(n[1]=parseInt(t/86400),t%=86400),t>=3600&&(n[2]=a(parseInt(t/3600)),t%=3600),t>=60&&(n[3]=a(parseInt(t/60)),t%=60),t>=0&&(n[4]=a(t));let o="";o+="本站已运行："+n[1]+" 天 "+n[2]+" 时 "+n[3]+" 分 "+n[4]+" 秒",document.getElementById("runtime").innerHTML=o}),1e3),$(".topGroup").hover((function(){}),(function(){hoverOnCommentBarrage=!1,document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1}));var getTimeState=()=>{var e=(new Date).getHours(),t="";return e>=0&&e<=5?t="晚安":e>5&&e<=10?t="早上好":e>10&&e<=14?t="中午好":e>14&&e<=18?t="下午好":e>18&&e<=24&&(t="晚上好"),t};